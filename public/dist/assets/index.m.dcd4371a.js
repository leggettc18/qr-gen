var re=String.prototype.replace,te=/%20/g,$={RFC1738:"RFC1738",RFC3986:"RFC3986"},z={default:$.RFC3986,formatters:{RFC1738:function(u){return re.call(u,te,"+")},RFC3986:function(u){return String(u)}},RFC1738:$.RFC1738,RFC3986:$.RFC3986},ne=z,T=Object.prototype.hasOwnProperty,w=Array.isArray,b=function(){for(var u=[],e=0;e<256;++e)u.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return u}(),ie=function(e){for(;e.length>1;){var r=e.pop(),t=r.obj[r.prop];if(w(t)){for(var f=[],n=0;n<t.length;++n)typeof t[n]!="undefined"&&f.push(t[n]);r.obj[r.prop]=f}}},K=function(e,r){for(var t=r&&r.plainObjects?Object.create(null):{},f=0;f<e.length;++f)typeof e[f]!="undefined"&&(t[f]=e[f]);return t},ae=function u(e,r,t){if(!r)return e;if(typeof r!="object"){if(w(e))e.push(r);else if(e&&typeof e=="object")(t&&(t.plainObjects||t.allowPrototypes)||!T.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var f=e;return w(e)&&!w(r)&&(f=K(e,t)),w(e)&&w(r)?(r.forEach(function(n,i){if(T.call(e,i)){var a=e[i];a&&typeof a=="object"&&n&&typeof n=="object"?e[i]=u(a,n,t):e.push(n)}else e[i]=n}),e):Object.keys(r).reduce(function(n,i){var a=r[i];return T.call(n,i)?n[i]=u(n[i],a,t):n[i]=a,n},f)},oe=function(e,r){return Object.keys(r).reduce(function(t,f){return t[f]=r[f],t},e)},ue=function(u,e,r){var t=u.replace(/\+/g," ");if(r==="iso-8859-1")return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch{return t}},le=function(e,r,t,f,n){if(e.length===0)return e;var i=e;if(typeof e=="symbol"?i=Symbol.prototype.toString.call(e):typeof e!="string"&&(i=String(e)),t==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",l=0;l<i.length;++l){var o=i.charCodeAt(l);if(o===45||o===46||o===95||o===126||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||n===ne.RFC1738&&(o===40||o===41)){a+=i.charAt(l);continue}if(o<128){a=a+b[o];continue}if(o<2048){a=a+(b[192|o>>6]+b[128|o&63]);continue}if(o<55296||o>=57344){a=a+(b[224|o>>12]+b[128|o>>6&63]+b[128|o&63]);continue}l+=1,o=65536+((o&1023)<<10|i.charCodeAt(l)&1023),a+=b[240|o>>18]+b[128|o>>12&63]+b[128|o>>6&63]+b[128|o&63]}return a},fe=function(e){for(var r=[{obj:{o:e},prop:"o"}],t=[],f=0;f<r.length;++f)for(var n=r[f],i=n.obj[n.prop],a=Object.keys(i),l=0;l<a.length;++l){var o=a[l],c=i[o];typeof c=="object"&&c!==null&&t.indexOf(c)===-1&&(r.push({obj:i,prop:o}),t.push(c))}return ie(r),e},ce=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},se=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},de=function(e,r){return[].concat(e,r)},pe=function(e,r){if(w(e)){for(var t=[],f=0;f<e.length;f+=1)t.push(r(e[f]));return t}return r(e)},W={arrayToObject:K,assign:oe,combine:de,compact:fe,decode:ue,encode:le,isBuffer:se,isRegExp:ce,maybeMap:pe,merge:ae},_=W,F=z,he=Object.prototype.hasOwnProperty,V={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},j=Array.isArray,ye=String.prototype.split,me=Array.prototype.push,X=function(u,e){me.apply(u,j(e)?e:[e])},ve=Date.prototype.toISOString,Z=F.default,v={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:_.encode,encodeValuesOnly:!1,format:Z,formatter:F.formatters[Z],indices:!1,serializeDate:function(e){return ve.call(e)},skipNulls:!1,strictNullHandling:!1},ge=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},be=function u(e,r,t,f,n,i,a,l,o,c,p,y,h,s){var d=e;if(typeof a=="function"?d=a(r,d):d instanceof Date?d=c(d):t==="comma"&&j(d)&&(d=_.maybeMap(d,function(R){return R instanceof Date?c(R):R})),d===null){if(f)return i&&!h?i(r,v.encoder,s,"key",p):r;d=""}if(ge(d)||_.isBuffer(d)){if(i){var S=h?r:i(r,v.encoder,s,"key",p);if(t==="comma"&&h){for(var P=ye.call(String(d),","),I="",A=0;A<P.length;++A)I+=(A===0?"":",")+y(i(P[A],v.encoder,s,"value",p));return[y(S)+"="+I]}return[y(S)+"="+y(i(d,v.encoder,s,"value",p))]}return[y(r)+"="+y(String(d))]}var C=[];if(typeof d=="undefined")return C;var E;if(t==="comma"&&j(d))E=[{value:d.length>0?d.join(",")||null:void 0}];else if(j(a))E=a;else{var M=Object.keys(d);E=l?M.sort(l):M}for(var D=0;D<E.length;++D){var O=E[D],U=typeof O=="object"&&typeof O.value!="undefined"?O.value:d[O];if(!(n&&U===null)){var ee=j(d)?typeof t=="function"?t(r,O):r:r+(o?"."+O:"["+O+"]");X(C,u(U,ee,t,f,n,i,a,l,o,c,p,y,h,s))}}return C},Oe=function(e){if(!e)return v;if(e.encoder!==null&&typeof e.encoder!="undefined"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||v.charset;if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=F.default;if(typeof e.format!="undefined"){if(!he.call(F.formatters,e.format))throw new TypeError("Unknown format option provided.");t=e.format}var f=F.formatters[t],n=v.filter;return(typeof e.filter=="function"||j(e.filter))&&(n=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:v.addQueryPrefix,allowDots:typeof e.allowDots=="undefined"?v.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:v.charsetSentinel,delimiter:typeof e.delimiter=="undefined"?v.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:v.encode,encoder:typeof e.encoder=="function"?e.encoder:v.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:v.encodeValuesOnly,filter:n,format:t,formatter:f,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:v.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:v.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:v.strictNullHandling}},we=function(u,e){var r=u,t=Oe(e),f,n;typeof t.filter=="function"?(n=t.filter,r=n("",r)):j(t.filter)&&(n=t.filter,f=n);var i=[];if(typeof r!="object"||r===null)return"";var a;e&&e.arrayFormat in V?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=V[a];f||(f=Object.keys(r)),t.sort&&f.sort(t.sort);for(var o=0;o<f.length;++o){var c=f[o];t.skipNulls&&r[c]===null||X(i,be(r[c],c,l,t.strictNullHandling,t.skipNulls,t.encode?t.encoder:null,t.filter,t.sort,t.allowDots,t.serializeDate,t.format,t.formatter,t.encodeValuesOnly,t.charset))}var p=i.join(t.delimiter),y=t.addQueryPrefix===!0?"?":"";return t.charsetSentinel&&(t.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),p.length>0?y+p:""},x=W,L=Object.prototype.hasOwnProperty,je=Array.isArray,m={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:x.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},xe=function(u){return u.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Y=function(u,e){return u&&typeof u=="string"&&e.comma&&u.indexOf(",")>-1?u.split(","):u},Se="utf8=%26%2310003%3B",Pe="utf8=%E2%9C%93",Ee=function(e,r){var t={},f=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,n=r.parameterLimit===1/0?void 0:r.parameterLimit,i=f.split(r.delimiter,n),a=-1,l,o=r.charset;if(r.charsetSentinel)for(l=0;l<i.length;++l)i[l].indexOf("utf8=")===0&&(i[l]===Pe?o="utf-8":i[l]===Se&&(o="iso-8859-1"),a=l,l=i.length);for(l=0;l<i.length;++l)if(l!==a){var c=i[l],p=c.indexOf("]="),y=p===-1?c.indexOf("="):p+1,h,s;y===-1?(h=r.decoder(c,m.decoder,o,"key"),s=r.strictNullHandling?null:""):(h=r.decoder(c.slice(0,y),m.decoder,o,"key"),s=x.maybeMap(Y(c.slice(y+1),r),function(d){return r.decoder(d,m.decoder,o,"value")})),s&&r.interpretNumericEntities&&o==="iso-8859-1"&&(s=xe(s)),c.indexOf("[]=")>-1&&(s=je(s)?[s]:s),L.call(t,h)?t[h]=x.combine(t[h],s):t[h]=s}return t},Fe=function(u,e,r,t){for(var f=t?e:Y(e,r),n=u.length-1;n>=0;--n){var i,a=u[n];if(a==="[]"&&r.parseArrays)i=[].concat(f);else{i=r.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,o=parseInt(l,10);!r.parseArrays&&l===""?i={0:f}:!isNaN(o)&&a!==l&&String(o)===l&&o>=0&&r.parseArrays&&o<=r.arrayLimit?(i=[],i[o]=f):l!=="__proto__"&&(i[l]=f)}f=i}return f},Ne=function(e,r,t,f){if(!!e){var n=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=t.depth>0&&i.exec(n),o=l?n.slice(0,l.index):n,c=[];if(o){if(!t.plainObjects&&L.call(Object.prototype,o)&&!t.allowPrototypes)return;c.push(o)}for(var p=0;t.depth>0&&(l=a.exec(n))!==null&&p<t.depth;){if(p+=1,!t.plainObjects&&L.call(Object.prototype,l[1].slice(1,-1))&&!t.allowPrototypes)return;c.push(l[1])}return l&&c.push("["+n.slice(l.index)+"]"),Fe(c,r,t,f)}},Ae=function(e){if(!e)return m;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset!="undefined"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset=="undefined"?m.charset:e.charset;return{allowDots:typeof e.allowDots=="undefined"?m.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:m.allowPrototypes,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:m.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:m.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:m.comma,decoder:typeof e.decoder=="function"?e.decoder:m.decoder,delimiter:typeof e.delimiter=="string"||x.isRegExp(e.delimiter)?e.delimiter:m.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:m.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:m.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:m.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:m.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:m.strictNullHandling}},Ce=function(u,e){var r=Ae(e);if(u===""||u===null||typeof u=="undefined")return r.plainObjects?Object.create(null):{};for(var t=typeof u=="string"?Ee(u,r):u,f=r.plainObjects?Object.create(null):{},n=Object.keys(t),i=0;i<n.length;++i){var a=n[i],l=Ne(a,t[a],r,typeof u=="string");f=x.merge(f,l,r)}return x.compact(f)},De=we,Re=Ce,$e=z,q={formats:$e,parse:Re,stringify:De};function G(u,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(u,t.key,t)}}function J(u,e,r){return e&&G(u.prototype,e),r&&G(u,r),Object.defineProperty(u,"prototype",{writable:!1}),u}function g(){return g=Object.assign||function(u){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(u[t]=r[t])}return u},g.apply(this,arguments)}function k(u){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(u)}function N(u,e){return N=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r},N(u,e)}function Te(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(u,e,r){return B=Te()?Reflect.construct:function(t,f,n){var i=[null];i.push.apply(i,f);var a=new(Function.bind.apply(t,i));return n&&N(a,n.prototype),a},B.apply(null,arguments)}function H(u){var e=typeof Map=="function"?new Map:void 0;return H=function(r){if(r===null||Function.toString.call(r).indexOf("[native code]")===-1)return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,t)}function t(){return B(r,arguments,k(this).constructor)}return t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),N(t,r)},H(u)}var Q=function(){function u(r,t,f){var n,i;this.name=r,this.definition=t,this.bindings=(n=t.bindings)!=null?n:{},this.wheres=(i=t.wheres)!=null?i:{},this.config=f}var e=u.prototype;return e.matchesUrl=function(r){if(!this.definition.methods.includes("GET"))return!1;var t=this.template.replace(/\/{[^}?]*\?}/g,"(/[^/?]+)?").replace(/{[^}?]*\?}/g,"([^/?]+)?").replace(/{[^}]+}/g,"[^/?]+").replace(/^\w+:\/\//,"");return new RegExp("^"+t+"$").test(r.replace(/\/+$/,"").split("?").shift())},e.compile=function(r){var t=this;return this.parameterSegments.length?this.template.replace(/{([^}?]+)\??}/g,function(f,n){var i,a;if([null,void 0].includes(r[n])&&t.parameterSegments.find(function(l){return l.name===n}).required)throw new Error("Ziggy error: '"+n+"' parameter is required for route '"+t.name+"'.");return t.parameterSegments[t.parameterSegments.length-1].name===n&&t.wheres[n]===".*"?(a=r[n])!=null?a:"":encodeURIComponent((i=r[n])!=null?i:"")}).replace(/\/+$/,""):this.template},J(u,[{key:"template",get:function(){return((this.config.absolute?this.definition.domain?""+this.config.url.match(/^\w+:\/\//)[0]+this.definition.domain+(this.config.port?":"+this.config.port:""):this.config.url:"")+"/"+this.definition.uri).replace(/\/+$/,"")}},{key:"parameterSegments",get:function(){var r,t;return(r=(t=this.template.match(/{[^}?]+\??}/g))==null?void 0:t.map(function(f){return{name:f.replace(/{|\??}/g,""),required:!/\?}$/.test(f)}}))!=null?r:[]}}]),u}(),Qe=function(u){var e,r;function t(n,i,a,l){var o;if(a===void 0&&(a=!0),(o=u.call(this)||this).t=l!=null?l:typeof Ziggy!="undefined"?Ziggy:globalThis==null?void 0:globalThis.Ziggy,o.t=g({},o.t,{absolute:a}),n){if(!o.t.routes[n])throw new Error("Ziggy error: route '"+n+"' is not in the route list.");o.i=new Q(n,o.t.routes[n],o.t),o.u=o.o(i)}return o}r=u,(e=t).prototype=Object.create(r.prototype),e.prototype.constructor=e,N(e,r);var f=t.prototype;return f.toString=function(){var n=this,i=Object.keys(this.u).filter(function(a){return!n.i.parameterSegments.some(function(l){return l.name===a})}).filter(function(a){return a!=="_query"}).reduce(function(a,l){var o;return g({},a,((o={})[l]=n.u[l],o))},{});return this.i.compile(this.u)+q.stringify(g({},i,this.u._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:function(a,l){return typeof a=="boolean"?Number(a):l(a)}})},f.current=function(n,i){var a=this,l=this.t.absolute?this.l().host+this.l().pathname:this.l().pathname.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"),o=Object.entries(this.t.routes).find(function(d){return new Q(n,d[1],a.t).matchesUrl(l)})||[void 0,void 0],c=o[0],p=o[1];if(!n)return c;var y=new RegExp("^"+n.replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(c);if([null,void 0].includes(i)||!y)return y;var h=new Q(c,p,this.t);i=this.o(i,h);var s=this.h(p);return!(!Object.values(i).every(function(d){return!d})||Object.values(s).length)||Object.entries(i).every(function(d){return s[d[0]]==d[1]})},f.l=function(){var n,i,a,l,o,c,p=typeof window!="undefined"?window.location:{},y=p.host,h=p.pathname,s=p.search;return{host:(n=(i=this.t.location)==null?void 0:i.host)!=null?n:y===void 0?"":y,pathname:(a=(l=this.t.location)==null?void 0:l.pathname)!=null?a:h===void 0?"":h,search:(o=(c=this.t.location)==null?void 0:c.search)!=null?o:s===void 0?"":s}},f.has=function(n){return Object.keys(this.t.routes).includes(n)},f.o=function(n,i){var a=this;n===void 0&&(n={}),i===void 0&&(i=this.i),n=["string","number"].includes(typeof n)?[n]:n;var l=i.parameterSegments.filter(function(c){return!a.t.defaults[c.name]});if(Array.isArray(n))n=n.reduce(function(c,p,y){var h,s;return g({},c,l[y]?((h={})[l[y].name]=p,h):((s={})[p]="",s))},{});else if(l.length===1&&!n[l[0].name]&&(n.hasOwnProperty(Object.values(i.bindings)[0])||n.hasOwnProperty("id"))){var o;(o={})[l[0].name]=n,n=o}return g({},this.v(i),this.g(n,i))},f.v=function(n){var i=this;return n.parameterSegments.filter(function(a){return i.t.defaults[a.name]}).reduce(function(a,l,o){var c,p=l.name;return g({},a,((c={})[p]=i.t.defaults[p],c))},{})},f.g=function(n,i){var a=i.bindings,l=i.parameterSegments;return Object.entries(n).reduce(function(o,c){var p,y,h=c[0],s=c[1];if(!s||typeof s!="object"||Array.isArray(s)||!l.some(function(d){return d.name===h}))return g({},o,((y={})[h]=s,y));if(!s.hasOwnProperty(a[h])){if(!s.hasOwnProperty("id"))throw new Error("Ziggy error: object passed as '"+h+"' parameter is missing route model binding key '"+a[h]+"'.");a[h]="id"}return g({},o,((p={})[h]=s[a[h]],p))},{})},f.h=function(n){var i,a=this.l().pathname.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,""),l=function(o,c,p){c===void 0&&(c="");var y=[o,c].map(function(s){return s.split(p)}),h=y[0];return y[1].reduce(function(s,d,S){var P;return/{[^}?]+\??}/.test(d)&&h[S]?g({},s,((P={})[d.replace(/.*{|\??}.*/g,"")]=h[S].replace(d.match(/^[^{]*/g),"").replace(d.match(/[^}]*$/g),""),P)):s},{})};return g({},l(this.l().host,n.domain,"."),l(a,n.uri,"/"),q.parse((i=this.l().search)==null?void 0:i.replace(/^\?/,"")))},f.valueOf=function(){return this.toString()},f.check=function(n){return this.has(n)},J(t,[{key:"params",get:function(){return this.h(this.t.routes[this.current()])}}]),t}(H(String));function _e(u,e,r,t){var f=new Qe(u,e,r,t);return u?f.toString():f}export{_e as h};
